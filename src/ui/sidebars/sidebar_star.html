<template>
	<div class="star star_${star.color}">
		<template if.bind="!star.explored && !app.options.see_all">
			<h2>Unexplored</h2>
			<p class="desc">${star.colorDesc}</p>
		</template>
		<template if.bind="star.explored || app.options.see_all">
			<h2 if.bind="!editing_name" click.delegate="ToggleNameEdit()">${star.name}</h2>
			<p if.bind="editing_name" >
				<input type="text" value.bind="star.name" />
				<a href="" click.delegate="ToggleNameEdit()">OK</a>
			</p>
			<div class="hilite_wrapper smallplanetbg" repeat.for="p of star.planets"  click.delegate="app.SwitchSideBar(p)">
				<div class="planet atm${p.atm} tmp${p.temp} grav${p.grav}" css.one-time="PlanetSizeCSS(p)">
					<img if.bind="p.owner" class="flag" src.bind="p.owner.flag_img" style="border:1px solid #666;" />
					<!--<div class="env_box"> <div class="target"></div> </div>-->	
					<h3 css="color: ${p.ui_color};">${p.name}</h3>
					<p class="env_label" style="font-size: 80%; text-align:left; float:none; width: 100%">${p.gravDisplayName}  ${p.envDisplayName}</p>
					<div class="physattrs marginless" style="font-size: 80%; color: #999;">
						<span repeat.for="a of p.physattrs" title.bind="a.desc">â˜…${a.name} </span>
					</div>			
					<div class="phys">
						<div class="size" style="margin: 0; padding: 0;">
							<span class="size">${p.size}<br/><span class="size">SIZE</span></span>							
							<span class="en">${p.energy}x<br/><span class="en">ENERGY</span></span>
							<span class="${calc_vals[p.id].hab ? 'good' : 'bad'}">
								${(calc_vals[p.id].adapt > 0) ? '+' : ''}${calc_vals[p.id].adapt}<br/>
								<span class="">ENV</span>
							</span>
							<span class="pop" if.bind="p.owner">${p.total_pop|round}<br/><span class="pop">POP</span></span>
						</div>
						<div class="resources">
							<template repeat.for="k of p.resources|props" containerless>
								<span repeat.for="i of p.resources[k]" class="${k}"></span>
							</template>
						</div>
						<div class="zones micro" if.bind="p.owner && (p.owner.is_player || app.options.see_all)">
							<template containerless repeat.for="z of p.zones">
								<div repeat.for="s of z.size" click.delegate="ClickZone(z)"
									class="zone clickable ${z==sel_zone?'hilite':''} ${z.type} ${z.key} 
									${z.size==1 ? 'only' : ( s==0 ? 'start' : (s==z.size-1 ? 'end' : 'mid') ) }
									">
								</div>
							</template>
							<div repeat.for="z of (p.size - p.zoned)" class="zone empty"></div>
						</div>						
					</div>
				</div>
			</div>
		</template>
	</div>
</template>

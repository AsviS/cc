<template>
	<div id="planets_pane" class="pane">
	
		<p style="float:right; margin: 0;"><button click.delegate="ClosePanel()" class="big">CLOSE</button></p>
		
		<h1>Planets</h1>
		
		<p>
			<a href="#" class="button ${show_mine?'':'cool'}" click.delegate="show_mine=!show_mine">My Planets</a>
			<a href="#" class="button ${show_foreign?'':'cool'}" click.delegate="show_foreign=!show_foreign">Foreign Planets</a>
			<a href="#" class="button ${show_unclaimed?'':'cool'}" click.delegate="show_unclaimed=!show_unclaimed">Unclaimed Planets</a>
			<b>${planets.length}</b> planets
		</p>
		
		<table cellpadding="6" if.bind="planets.length">
			<tr>
				<th></th>
				<th>Planet</th>
				<th>Size</th>
				<th>Environment</th>
				<th>ATM</th>
				<th>TMP</th>
				<th>GRV</th>
				<th>HAB</th>
				<th>Resource</th>
				<th>Energy</th>
				<th>Pop</th>
				<th>Tax%</th>
				<th>Spend</th>
				<th>Income</th>
			</tr>
			<template repeat.for="p of planets" containerless>
				<tr if.bind="(show_mine && p.owner == myciv) || (show_unclaimed && !p.owner) || (show_foreign && p.owner != myciv && p.owner)"
					click.delegate="ClickPlanet(p)" 
					>
					<td><img if.bind="p.owner" class="flag" src.bind="p.owner.flag_img" style="max-height: 16px;" /></td>
					<td><b style="color: ${p.owner ? p.owner.color : 'inherit'};">${p.name}</b></td>
					<td class="i">${p.size}</td>
					<td>${p.envDisplayName}</td>
					<td>${p.atm}</td>
					<td>${p.temp}</td>
					<td>${p.grav}</td>
					<td class="${p.Habitable(app.game.myciv.race) ? (p.Adaptation(app.game.myciv.race) < 0 ? 'alert' : 'good') : 'bad'}">${p.Adaptation(app.game.myciv.race)}</td>
					
					<td class="resources">
						<template repeat.for="k of p.resources|props" containerless>
							<span repeat.for="i of p.resources[k]" class="${k}"></span>
						</template>
					</td>
					
					<td>${p.energy}x</td>
					<td class="i">${p.total_pop|round:1}</td>
					<td class="t">${p.tax_rate|percent}</td>
					<td class="t">${p.spending|percent}</td>
					<td class="${p.treasury_contrib >= 0 ? 'good' : 'bad'}">${p.treasury_contrib >= 0 ? '+' : ''}${p.treasury_contrib|round}</td>
				</tr>
			</template>
		</table>
		
	</div>
</template>

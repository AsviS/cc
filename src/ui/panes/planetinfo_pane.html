<template>
<!--	<require from="./converters/percent"></require>
	<require from="./converters/round"></require>-->

	<div id="planetinfo_pane" class="pane">
		<p style="float:right;"><a href="#"  click.delegate="ClosePanel()" class="button big">CLOSE</a></p>
		<h1>${planet.name}</h1>
					
		<div class="flexwrap" if.bind="planet.owner">
			
			<div class="content acct_graph" style="min-width: 85%;">
				<h2>Accounting History</h2>
				<canvas id="acct_graph"></canvas>
			</div>
		
			<div class="content data" style="min-width: 45%;">
				<h2>Accounting</h2>
				<table class="small wide">
					<tr>
						<th></th>
						<th>Name</th>
						<th>$</th>
						<th>Sh</th>
						<th>Df</th>
						<th>Hs</th>
						<th>Rs</th>
						<th>O</th>
						<th>S</th>
						<th>M</th>
						<th>R</th>
						<th>G</th>
						<th>B</th>
						<th>C</th>
						<th>Y</th>
						<th>V</th>
					</tr>
					<tr class="bold">
						<td></td>
						<td>TOTALS</td>
						<td repeat.for="k of ['$','ship','def','hou','res','o','s','m','r','g','b','c','y','v']"
						class="${planet.acct_total[k] > 0 ? 'good' : (planet.acct_total[k] < 0 ? 'bad' : 'zero')}">${planet.acct_total[k]|round}</td>
					</tr>
					<tr repeat.for="row of planet.acct_ledger">
						<td class="zero right">${row.type}</td>
						<td>${row.name}</td>
						<td repeat.for="k of ['$','ship','def','hou','res','o','s','m','r','g','b','c','y','v']"
						class="${row[k] > 0 ? 'good' : (row[k] < 0 ? 'bad' : 'zero')}">${row[k]|round}</td>
					</tr>
				</table>		
			</div>
			
			<!-- <div class="content data">
				<h2>Summary</h2>
				<span>POP: ${planet.total_pop|round:1}</span>
			</div> -->
			
			<div class="content financial">
				<h2>Financial</h2>
				<span>Tax Rate: ${(planet.tax_rate)|percent}%</span>
				<span>Tax Income: ${(planet.econ.tax_rev)|round}</span>
				<br>
				<span>GDP: ${planet.econ.GDP|round:1}</span>
				<span>PCI: ${planet.econ.PCI|round:1} âžž ${planet.econ.target_PCI|round:1} </span>
			</div>
						
			<!--
				
			<div class="content production">
				<h2>Production</h2>
				<span>Currently Building: ${planet.prod_q[0].name} FIXME - AURELIA BINDING PROBLEM</span>
				<span>Complete In: ${planet.prod_q[0].turns_left} turns</span>
				<p><b>When ships are completed, send them to:</b></p>
				<select value.bind="planet.ship_dest">
					<option repeat.for="option of ship_dest_opts" model.bind="option.value">${option.name}</option>
				</select>
			</div>
			
			-->
			
		</div>
		
	</div>



</template>

<template>

	<div id="diplo_pane" class="pane">
		<p style="float:right;"><button click.delegate="ClosePanel()" class="big">CLOSE</button></p>
		<h1>Diplomacy</h1>
		
		<div id="civ_list">
			<template containerless repeat.for="[c,acct] of app.game.myciv.diplo.contacts">
				<div if.bind="c.diplo.contactable && c.planets.length" 
					css="border-color: rgb( ${c.color_rgb[0]}, ${c.color_rgb[1]}, ${c.color_rgb[2]} ); 
						background-color: rgba( ${c.color_rgb[0]}, ${c.color_rgb[1]}, ${c.color_rgb[2]}, 0.55 );
						${!acct.in_range ? 'pointer-events:none; opacity:0.25;' : '' }
						">
					<img class="flag" src.one-time="c.flag_img" />
					<h2>${c.name}</h2>
					<img src.one-time="c.diplo_img_small" class="diplo_img" click.delegate="SpeakTo(c)" />
					<div class="love_nub"><div class="nub" css="margin-left: calc(${acct.lovenub} * (100% - 6em));">${acct.lovenub|loveNub}</div></div>
					<p>Communication: <b>${c.CommOverlapWith(app.game.myciv) | communicationAbility }</b></p>
					<p>Attention Span: <b>${c.diplo.contacts.get(app.game.myciv).attspan|percent}%</b></p>
					<p>
						<span repeat.for="[type,treaty] of acct.treaties" >âš‘ ${treaty.label}<br/></span>
					</p>
					<p class="button_rack button_rack_fill">
						<button click.delegate="SpeakTo(c)">SPEAK TO</button>
					</p>
				</div>
			</template>
		</div>
		
		<p><button click.delegate="ClosePanel()" class="big">CLOSE</button></p>
	</div>

</template>
